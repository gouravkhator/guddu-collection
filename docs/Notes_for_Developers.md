# Notes for Developers

## Why Firebase API Keys and Env Variables are exposed publicly?

- The env variables prefixed with `REACT_APP_` gets hardcoded with actual values in the built files, which can be inspected on the client side by anyone.

- These firebase env variables are not meant by design by the firebase team, to be private. These are not secret keys, rather they are just the keys to identify the firebase project.

- Main database security lies in the Firebase Security rules, and not in hiding these keys.

- Read more on [How to secure your firebase project, even when your api key is publicly available](https://medium.com/@devesu/how-to-secure-your-firebase-project-even-when-your-api-key-is-publicly-available-a462a2a58843).

- For restricting the applications/websites from doing API calls, follow below steps:

  1. Visit `https://console.cloud.google.com/apis`.
  2. Select your project from there, here for our case it is `Guddu Collection Production`.
  3. Then go to `Credentials` side panel tab.
  4. Then under `API Keys`, click on `Browser Key (auto generated by Firebase)`.
  5. Goto `Application Restrictions`.
  6. Select `HTTP referrers (web sites)`.
  7. Then under `Website Restrictions` section, enter the below list of domains as it is.

     ```
     https://guddu-collection.netlify.app/*
     https://guddu-collection-production.firebaseapp.com/*
     https://guddu-collection-production.web.app/*
     ```

- The above domains list were mainly added to the OAuth Redirect list too, and all these will be making the API calls to the main firebase, or else the signin/signout or other stuffs won't work.

- We cannot restrict firestore access to be allowed only from specific domains, so the firestore access would still work on other domains too.

- To improve the firestore security, we have added security rules on the firestore, such that everyone can read our products' data stored on firestore, but only authorized admins can modify those data.

- Also, currently we only store Guddu Collection products' data on firestore, and so we don't want to restrict anyone from reading that data, even if someone tries to read that data from other domains.

## Uploading of products is not baked into this repo

- Uploading of products data is added in a private github repo linked [here](https://github.com/gouravkhator/guddu-collection-products-upload).

- In future, I might add this and other admin specific features into guddu-collection repo itself, whilst also adding admin and normal user role-based access and authorization.
